<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Cynara API: cynara-admin.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Cynara API
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('cynara-admin_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">cynara-admin.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains administration APIs of cynara available with libcynara-admin.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="cynara-admin-types_8h_source.html">cynara-admin-types.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cynara-error_8h_source.html">cynara-error.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cynara-limits_8h_source.html">cynara-limits.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cynara-policy-types_8h_source.html">cynara-policy-types.h</a>&gt;</code><br/>
</div>
<p><a href="cynara-admin_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a29ee773616b3d31521b4aef5efc6369f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cynara-admin_8h.html#a29ee773616b3d31521b4aef5efc6369f">cynara_admin_initialize</a> (struct <a class="el" href="structcynara__admin.html">cynara_admin</a> **pp_cynara_admin)</td></tr>
<tr class="memdesc:a29ee773616b3d31521b4aef5efc6369f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize cynara-admin library.  <a href="#a29ee773616b3d31521b4aef5efc6369f">More...</a><br/></td></tr>
<tr class="separator:a29ee773616b3d31521b4aef5efc6369f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1b0e30761891103ea19d2d7903e1949"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cynara-admin_8h.html#ab1b0e30761891103ea19d2d7903e1949">cynara_admin_finish</a> (struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *p_cynara_admin)</td></tr>
<tr class="memdesc:ab1b0e30761891103ea19d2d7903e1949"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release cynara-admin library.  <a href="#ab1b0e30761891103ea19d2d7903e1949">More...</a><br/></td></tr>
<tr class="separator:ab1b0e30761891103ea19d2d7903e1949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d62f10402cc9e11b9366630587ed585"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cynara-admin_8h.html#a9d62f10402cc9e11b9366630587ed585">cynara_admin_set_policies</a> (struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *p_cynara_admin, const struct <a class="el" href="structcynara__admin__policy.html">cynara_admin_policy</a> *const *policies)</td></tr>
<tr class="memdesc:a9d62f10402cc9e11b9366630587ed585"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert, update or delete policies in cynara database.  <a href="#a9d62f10402cc9e11b9366630587ed585">More...</a><br/></td></tr>
<tr class="separator:a9d62f10402cc9e11b9366630587ed585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0a5d14b3c5467ffaeee8ecbcbbd3ecd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cynara-admin_8h.html#aa0a5d14b3c5467ffaeee8ecbcbbd3ecd">cynara_admin_set_bucket</a> (struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *p_cynara_admin, const char *bucket, int operation, const char *extra)</td></tr>
<tr class="memdesc:aa0a5d14b3c5467ffaeee8ecbcbbd3ecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add, remove or update buckets in cynara database.  <a href="#aa0a5d14b3c5467ffaeee8ecbcbbd3ecd">More...</a><br/></td></tr>
<tr class="separator:aa0a5d14b3c5467ffaeee8ecbcbbd3ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52034d5d300d766a4ea37b58fb4e4b17"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cynara-admin_8h.html#a52034d5d300d766a4ea37b58fb4e4b17">cynara_admin_check</a> (struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *p_cynara_admin, const char *start_bucket, const int recursive, const char *client, const char *user, const char *privilege, int *result, char **result_extra)</td></tr>
<tr class="memdesc:a52034d5d300d766a4ea37b58fb4e4b17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raw check client and user access for given privilege without using plugins extensions.  <a href="#a52034d5d300d766a4ea37b58fb4e4b17">More...</a><br/></td></tr>
<tr class="separator:a52034d5d300d766a4ea37b58fb4e4b17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44b2fe17521117025cad4068ce8c1c0d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cynara-admin_8h.html#a44b2fe17521117025cad4068ce8c1c0d">cynara_admin_list_policies</a> (struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *p_cynara_admin, const char *bucket, const char *client, const char *user, const char *privilege, struct <a class="el" href="structcynara__admin__policy.html">cynara_admin_policy</a> ***policies)</td></tr>
<tr class="memdesc:a44b2fe17521117025cad4068ce8c1c0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lists policies from single bucket in cynara database.  <a href="#a44b2fe17521117025cad4068ce8c1c0d">More...</a><br/></td></tr>
<tr class="separator:a44b2fe17521117025cad4068ce8c1c0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abab3343268ea7369550b57c4d785a17d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cynara-admin_8h.html#abab3343268ea7369550b57c4d785a17d">cynara_admin_erase</a> (struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *p_cynara_admin, const char *start_bucket, int recursive, const char *client, const char *user, const char *privilege)</td></tr>
<tr class="memdesc:abab3343268ea7369550b57c4d785a17d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erase policies matching filter from cynara database.  <a href="#abab3343268ea7369550b57c4d785a17d">More...</a><br/></td></tr>
<tr class="separator:abab3343268ea7369550b57c4d785a17d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb4163ec71a05921a69f1653c0f920f5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cynara-admin_8h.html#adb4163ec71a05921a69f1653c0f920f5">cynara_admin_list_policies_descriptions</a> (struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *p_cynara_admin, struct <a class="el" href="structcynara__admin__policy__descr.html">cynara_admin_policy_descr</a> ***descriptions)</td></tr>
<tr class="memdesc:adb4163ec71a05921a69f1653c0f920f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lists available policies with their name description.  <a href="#adb4163ec71a05921a69f1653c0f920f5">More...</a><br/></td></tr>
<tr class="separator:adb4163ec71a05921a69f1653c0f920f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains administration APIs of cynara available with libcynara-admin. </p>
<dl class="section author"><dt>Author</dt><dd>Lukasz Wojciechowski <a href="#" onclick="location.href='mai'+'lto:'+'l.w'+'oj'+'cie'+'ch'+'ow@'+'pa'+'rtn'+'er'+'.sa'+'ms'+'ung'+'.c'+'om'; return false;">l.woj<span style="display: none;">.nosp@m.</span>ciec<span style="display: none;">.nosp@m.</span>how@p<span style="display: none;">.nosp@m.</span>artn<span style="display: none;">.nosp@m.</span>er.sa<span style="display: none;">.nosp@m.</span>msun<span style="display: none;">.nosp@m.</span>g.com</a> </dd>
<dd>
Zofia Abramowska <a href="#" onclick="location.href='mai'+'lto:'+'z.a'+'br'+'amo'+'ws'+'ka@'+'sa'+'msu'+'ng'+'.co'+'m'; return false;">z.abr<span style="display: none;">.nosp@m.</span>amow<span style="display: none;">.nosp@m.</span>ska@s<span style="display: none;">.nosp@m.</span>amsu<span style="display: none;">.nosp@m.</span>ng.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>

<p>Definition in file <a class="el" href="cynara-admin_8h_source.html">cynara-admin.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a29ee773616b3d31521b4aef5efc6369f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cynara_admin_initialize </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcynara__admin.html">cynara_admin</a> **&#160;</td>
          <td class="paramname"><em>pp_cynara_admin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize cynara-admin library. </p>
<dl class="section user"><dt>Description:</dt><dd>Initialize cynara-admin library. Creates structure used in following API calls.</dd></dl>
<dl class="section user"><dt>Purpose:</dt><dd>This function must be invoked prior to other admin API calls. It creates structure needed by other cynara-admin library API functions.</dd></dl>
<dl class="section user"><dt>Typical use case:</dt><dd>Once before a service can call other cynara-admin library functions.</dd></dl>
<dl class="section user"><dt>Method of function operation:</dt><dd>This API initializes inner library structures and in case of success creates <a class="el" href="structcynara__admin.html">cynara_admin</a> structure and stores pointer to this structure at memory address passed in pp_cynara_admin parameter.</dd></dl>
<dl class="section user"><dt>Sync (or) async:</dt><dd>This is a synchronous API.</dd></dl>
<dl class="section user"><dt>Important notes:</dt><dd>Structure <a class="el" href="structcynara__admin.html">cynara_admin</a> created by <a class="el" href="cynara-admin_8h.html#a29ee773616b3d31521b4aef5efc6369f" title="Initialize cynara-admin library. ">cynara_admin_initialize()</a> call should be released with <a class="el" href="cynara-admin_8h.html#ab1b0e30761891103ea19d2d7903e1949" title="Release cynara-admin library. ">cynara_admin_finish()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pp_cynara_admin</td><td>address of pointer for created <a class="el" href="structcynara__admin.html">cynara_admin</a> structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CYNARA_API_SUCCESS on success, or error code otherwise. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="admin-api_8cpp_8example-example.html#a1">admin-api.cpp.example</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="ab1b0e30761891103ea19d2d7903e1949"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cynara_admin_finish </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *&#160;</td>
          <td class="paramname"><em>p_cynara_admin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release cynara-admin library. </p>
<dl class="section user"><dt>Description:</dt><dd>Releases cynara-admin library and destroys structure created with <a class="el" href="cynara-admin_8h.html#a29ee773616b3d31521b4aef5efc6369f" title="Initialize cynara-admin library. ">cynara_admin_initialize()</a> function.</dd></dl>
<dl class="section user"><dt>Purpose:</dt><dd>This API should be used to clean up after usage of cynara-admin library.</dd></dl>
<dl class="section user"><dt>Typical use case:</dt><dd>Function should be called once, when done with cynara-admin library API usage.</dd></dl>
<dl class="section user"><dt>Method of function operation:</dt><dd>This API releases inner library structures and destroys <a class="el" href="structcynara__admin.html">cynara_admin</a> structure.</dd></dl>
<dl class="section user"><dt>Sync (or) Async:</dt><dd>This is a synchronous API.</dd></dl>
<dl class="section user"><dt>Important notes:</dt><dd>No invocations of cynara-admin library API functions are allowed after call to <a class="el" href="cynara-admin_8h.html#ab1b0e30761891103ea19d2d7903e1949" title="Release cynara-admin library. ">cynara_admin_finish()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_cynara_admin</td><td><a class="el" href="structcynara__admin.html">cynara_admin</a> structure created in <a class="el" href="cynara-admin_8h.html#a29ee773616b3d31521b4aef5efc6369f" title="Initialize cynara-admin library. ">cynara_admin_initialize()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CYNARA_API_SUCCESS on success, or error code otherwise. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="admin-api_8cpp_8example-example.html#a4">admin-api.cpp.example</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a9d62f10402cc9e11b9366630587ed585"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cynara_admin_set_policies </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *&#160;</td>
          <td class="paramname"><em>p_cynara_admin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structcynara__admin__policy.html">cynara_admin_policy</a> *const *&#160;</td>
          <td class="paramname"><em>policies</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insert, update or delete policies in cynara database. </p>
<dl class="section user"><dt>Description:</dt><dd>Manages policies in cynara.</dd></dl>
<dl class="section user"><dt>Purpose:</dt><dd>This API should be used to insert, update or delete policies in cynara.</dd></dl>
<dl class="section user"><dt>Typical use case:</dt><dd>Enables privileged services to alter policies by adding, updating or removing records.</dd></dl>
<dl class="section user"><dt>Method of function operation:</dt><dd>Policies are arranged into buckets. Every policy is defined in context of some bucket identified with bucket field (string). A bucket consists of policies identified with tripple: (client, user, privilege), which is a (unique) key within considered bucket.</dd></dl>
<p>Every policy can be one of two types: simple or bucket-pointing policy. Simple policies have result field with value of CYNARA_ADMIN_DENY or CYNARA_ADMIN_ALLOW. result_extra field should be NULL in this case. Bucket-pointing policies have result field with value of CYNARA_ADMIN_BUCKET and name of bucket they point to in result_extra field.</p>
<p>Type of operation, which is run for every record (single policy) is defined by result field in <a class="el" href="structcynara__admin__policy.html" title="Defines single policy. ">cynara_admin_policy</a> structure. In case of CYNARA_ADMIN_DENY or CYNARA_ADMIN_ALLOW a simple policy is updated or inserted into cynara database. In case of CYNARA_ADMIN_BUCKET, a bucket-pointing policy is updated or inserted into cynara database. In case of CYNARA_ADMIN_DELETE, a policy is removed from cynara database. One call of <a class="el" href="cynara-admin_8h.html#a9d62f10402cc9e11b9366630587ed585" title="Insert, update or delete policies in cynara database. ">cynara_admin_set_policies()</a> can manage many different policies in different buckets.</p>
<p>However, considered buckets must exist before referring to them in policies.</p>
<dl class="section user"><dt>Sync (or) Async:</dt><dd>This is a synchronous API.</dd></dl>
<dl class="section user"><dt>Important notes:</dt><dd>When plugin API will be specified, there will be more valid types to pass as result. Numerical values of defines CYNARA_ADMIN_... may change, so usage of defines names is strongly recommended. Policies size cannot exceed CYNARA_MAX_VECTOR_SIZE excluding last null element and string members length cannot exceed CYNARA_MAX_ID_LENGTH, otherwise CYNARA_API_INVALID_PARAM will be returned.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_cynara_admin</td><td>cynara admin structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">policies</td><td>NULL terminated array of pointers to policy structures.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CYNARA_API_SUCCESS on success, or error code otherwise. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="admin-api_8cpp_8example-example.html#a8">admin-api.cpp.example</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="aa0a5d14b3c5467ffaeee8ecbcbbd3ecd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cynara_admin_set_bucket </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *&#160;</td>
          <td class="paramname"><em>p_cynara_admin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>operation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>extra</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add, remove or update buckets in cynara database. </p>
<dl class="section user"><dt>Description:</dt><dd>Adds new, updates or removes existing bucket for policies in cynara.</dd></dl>
<dl class="section user"><dt>Purpose:</dt><dd>This API should be used to add, remove or update buckets.</dd></dl>
<dl class="section user"><dt>Typical use case:</dt><dd>Enables privileged services to alter policies database by adding, updating or removing buckets.</dd></dl>
<dl class="section user"><dt>Method of function operation:</dt><dd>Every bucket has a default policy. During search, if no policy matches the searched key (client, user, privilege), default policy is returned.</dd></dl>
<p>Operation run on a single bucket defined with bucket parameter.</p>
<p>Operation parameter defines what should happen with bucket. In case of: CYNARA_ADMIN_DENY, a bucket is inserted or updated with CYNARA_ADMIN_DENY default policy; CYNARA_ADMIN_ALLOW, a bucket is inserted or updated with CYNARA_ADMIN_ALLOW default policy; CYNARA_ADMIN_DELETE, a bucket is removed with all policies that were kept in it.</p>
<dl class="section user"><dt>Sync (or) Async:</dt><dd>This is a synchronous API.</dd></dl>
<dl class="section user"><dt>Important notes:</dt><dd>When plugin API will be specified, there will be more valid types to pass as operation / default policy. Numerical values of defines CYNARA_ADMIN_... may change, so usages of provided consts is strongly recommended.</dd></dl>
<p>String length cannot exceed CYNARA_MAX_ID_LENGTH, otherwise CYNARA_API_INVALID_PARAM will be returned.</p>
<p>Default bucket identified with CYNARA_ADMIN_DEFAULT_BUCKET exists always. Its default policy is preset to DENY (can be altered, however). Default bucket cannot be removed.</p>
<p>Extra parameter will be used to pass additional data to cynara extensions to build more complex policies, such as ALLOW but for 5 minutes only, or ALLOW if user confirms.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_cynara_admin</td><td>cynara admin structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bucket</td><td>bucket name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">operation</td><td>type of operation (default policy or CYNARA_ADMIN_DELETE) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">extra</td><td>additional data for default policy (will be available with cynara extensions)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CYNARA_API_SUCCESS on success, or error code otherwise. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="admin-api_8cpp_8example-example.html#a2">admin-api.cpp.example</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="a52034d5d300d766a4ea37b58fb4e4b17"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cynara_admin_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *&#160;</td>
          <td class="paramname"><em>p_cynara_admin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>start_bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>recursive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>privilege</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>result_extra</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Raw check client and user access for given privilege without using plugins extensions. </p>
<dl class="section user"><dt>Description:</dt><dd>Raw check client and user access for given privilege without using plugins extensions.</dd></dl>
<dl class="section user"><dt>Purpose:</dt><dd>This API should be used to check type of matching policy for check request</dd></dl>
<dl class="section user"><dt>Typical use case:</dt><dd>Administrator of cynara want to know, what would cynara return to client, if asked about given access.</dd></dl>
<dl class="section user"><dt>Method of function operation:</dt><dd>Function works almost the same way as <a class="el" href="cynara-client_8h.html#ae4006193f9b133cf0cfdb1747b06bc74">cynara_check()</a> client function. The differences are:<ul>
<li>user must specify bucket, from which search would be started (in case of <a class="el" href="cynara-client_8h.html#ae4006193f9b133cf0cfdb1747b06bc74">cynara_check()</a> it is always the default bucket)</li>
<li>user can specify if search should be recursive: disabling recursive check will constrain search to single bucket only, ignoring all policies leading to other buckets (in case of <a class="el" href="cynara-client_8h.html#ae4006193f9b133cf0cfdb1747b06bc74">cynara_check()</a> search is always recursive)</li>
<li>when matching policy in cynara is found, its result is returned without being interpreted by plugin extensions.</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Sync (or) Async:</dt><dd>This is a synchronous API.</dd></dl>
<dl class="section user"><dt>Important notes:</dt><dd>(*result_extra) may be set to NULL, if extra data are not used in matched policy If (*result_extra) is not NULL, it contains a string allocated by cynara admin library with malloc(3) function and must be released with free(3) function. String length cannot exceed CYNARA_MAX_ID_LENGTH, otherwise CYNARA_API_INVALID_PARAM will be returned.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_cynara_admin</td><td>cynara admin structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start_bucket</td><td>name of bucket where search would start. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">recursive</td><td>FALSE (== 0) : search is not recursive (single bucket search); TRUE (!= 0) : search does not ignore policies leading to another buckets. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">client</td><td>application or process identifier. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user</td><td>user running client. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">privilege</td><td>privilege that is a subject of a check. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result</td><td>placeholder for matched policy type. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result_extra</td><td>placeholder for matched policy additional data (see Important Notes!).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CYNARA_API_SUCCESS on success, or error code otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="a44b2fe17521117025cad4068ce8c1c0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cynara_admin_list_policies </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *&#160;</td>
          <td class="paramname"><em>p_cynara_admin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>privilege</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcynara__admin__policy.html">cynara_admin_policy</a> ***&#160;</td>
          <td class="paramname"><em>policies</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lists policies from single bucket in cynara database. </p>
<dl class="section user"><dt>Description:</dt><dd>Lists filtered cynara policies from single bucket.</dd></dl>
<dl class="section user"><dt>Purpose:</dt><dd>This API should be used to list policies from single bucket.</dd></dl>
<dl class="section user"><dt>Typical use case:</dt><dd>List all policies matching defined filter.</dd></dl>
<dl class="section user"><dt>Method of function operation:</dt><dd>Policies are arranged into buckets. Every bucket contains set of policies. Each of policies are identified with triple {client, user, privilege}. Function lists all policies from single bucket with matching client, user and privilege names.</dd></dl>
<p>CYNARA_ADMIN_ANY can be used to match any client, user or privilege, e.g.</p>
<p>List with parameters: {client = CYNARA_ADMIN_ANY, user = "alice", privilege = CYNARA_ADMIN_ANY} will match all policies related to "alice", so will match {"app1", "alice", "gps"} and {CYNARA_ADMIN_WILDCARD, "alice", "sms"}, but won't match {"app3", CYNARA_ADMIN_WILDCARD, "call"}.</p>
<p>List with parameters: {client = "calculator", user = CYNARA_ADMIN_WILDCARD, privilege = CYNARA_ADMIN_ANY} will match {"calculator", CYNARA_ADMIN_WILDCARD, "sms"} but won't match {CYNARA_ADMIN_WILDCARD, CYNARA_ADMIN_WILDCARD, "sms"} nor {"calculator", "bob", "sms"}</p>
<p>Matching policies are returned as NULL terminated array of pointers to <a class="el" href="structcynara__admin__policy.html" title="Defines single policy. ">cynara_admin_policy</a> structures.</p>
<p>If any of: bucket, client, user, privilege, policies is NULL then CYNARA_API_INVALID_PARAM is returned. If there is no bucket with given name CYNARA_API_BUCKET_NOT_FOUND is returned.</p>
<p>In case of successful call CYNARA_API_SUCCESS is returned and <em>policies points to newly created array of pointers to struct <a class="el" href="structcynara__admin__policy.html" title="Defines single policy. ">cynara_admin_policy</a>. It is responsibility of caller to release:</p>
<ul>
<li>all non-NULL const char pointers in all <a class="el" href="structcynara__admin__policy.html" title="Defines single policy. ">cynara_admin_policy</a> structures;</li>
<li>all pointers to <a class="el" href="structcynara__admin__policy.html" title="Defines single policy. ">cynara_admin_policy</a> structures kept in *policies array;</li>
<li>*policies array itself. All allocation made by cynara admin library are done with malloc(3) function and must be released with free(3) function.</li>
</ul>
<p></em></p>
<p><em></p>
<dl class="section user"><dt>Sync (or) Async:</dt><dd>This is a synchronous API.</dd></dl>
<dl class="section user"><dt>Important notes:</dt><dd>String length cannot exceed CYNARA_MAX_ID_LENGTH, otherwise CYNARA_API_INVALID_PARAM will be returned.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_cynara_admin</td><td>cynara admin structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bucket</td><td>name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">client</td><td>filter for client name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user</td><td>filter for user name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">privilege</td><td>filter for privilege. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">policies</td><td>placeholder for NULL terminated array of pointers to policy structures.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CYNARA_API_SUCCESS on success, or error code otherwise. </dd></dl>
<p></em></p>

</div>
</div>
<a class="anchor" id="abab3343268ea7369550b57c4d785a17d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cynara_admin_erase </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *&#160;</td>
          <td class="paramname"><em>p_cynara_admin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>start_bucket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>recursive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>privilege</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Erase policies matching filter from cynara database. </p>
<dl class="section user"><dt>Description:</dt><dd>Erase policies matching filter from cynara database.</dd></dl>
<dl class="section user"><dt>Purpose:</dt><dd>This API should be used to erase multiple policies with some common key part, e.g. all policies related to given user.</dd></dl>
<dl class="section user"><dt>Typical use case:</dt><dd>Erase all policies matching defined filter.</dd></dl>
<dl class="section user"><dt>Method of function operation:</dt><dd>Policies are arranged into buckets. Every bucket contains set of policies. Each of policies are identified with triple {client, user, privilege}. Function erases all policies with matching client, user and privilege names.</dd></dl>
<p>There are two modes:</p>
<ul>
<li>non-recursive (recursive parameter set to 0) - when policies are erased only from single bucket</li>
<li>recursive (recursive parameter set to 1) when policies are removed from given start_bucket and all nested buckets.</li>
</ul>
<p>CYNARA_ADMIN_ANY can be used to match any client, user or privilege, e.g.</p>
<p>Erase with parameters: {client = CYNARA_ADMIN_ANY, user = "alice", privilege = CYNARA_ADMIN_ANY} will match all policies related to "alice", so will match {"app1", "alice", "gps"} and {CYNARA_ADMIN_WILDCARD, "alice", "sms"}, but won't match {"app3", CYNARA_ADMIN_WILDCARD, "call"}.</p>
<p>Erase with parameters: {client = "calculator", user = CYNARA_ADMIN_WILDCARD, privilege = CYNARA_ADMIN_ANY} will match {"calculator", CYNARA_ADMIN_WILDCARD, "sms"} but won't match {CYNARA_ADMIN_WILDCARD, CYNARA_ADMIN_WILDCARD, "sms"} nor {"calculator", "bob", "sms"}</p>
<p>If any of: start_bucket, client, user, privilege, policies is NULL then CYNARA_API_INVALID_PARAM is returned. If there is no bucket with given name CYNARA_API_BUCKET_NOT_FOUND is returned.</p>
<p>In case of successful call CYNARA_API_SUCCESS is returned.</p>
<dl class="section user"><dt>Sync (or) Async:</dt><dd>This is a synchronous API.</dd></dl>
<dl class="section user"><dt>Important notes:</dt><dd>String length cannot exceed CYNARA_MAX_ID_LENGTH, otherwise CYNARA_API_INVALID_PARAM will be returned.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_cynara_admin</td><td>cynara admin structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start_bucket</td><td>name of bucket where erase would start. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">recursive</td><td>FALSE (== 0) : erase is not recursive (single bucket erase); TRUE (!= 0) : erase follows all policies leading to nested buckets </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">client</td><td>filter for client name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">user</td><td>filter for user name. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">privilege</td><td>filter for privilege.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CYNARA_API_SUCCESS on success, or error code otherwise. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="admin-api_8cpp_8example-example.html#a9">admin-api.cpp.example</a>.</dd>
</dl>
</div>
</div>
<a class="anchor" id="adb4163ec71a05921a69f1653c0f920f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cynara_admin_list_policies_descriptions </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcynara__admin.html">cynara_admin</a> *&#160;</td>
          <td class="paramname"><em>p_cynara_admin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structcynara__admin__policy__descr.html">cynara_admin_policy_descr</a> ***&#160;</td>
          <td class="paramname"><em>descriptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lists available policies with their name description. </p>
<dl class="section user"><dt>Description:</dt><dd></dd></dl>
<p>Lists available cynara policy results with name description.</p>
<dl class="section user"><dt>Purpose:</dt><dd>This API should be used to list all available policy results (also from cynara extension plugins).</dd></dl>
<dl class="section user"><dt>Typical use case:</dt><dd>Gathering information about possible policy results and presenting them to user (using name attribute of description). Result can be passed to <a class="el" href="cynara-admin_8h.html#a9d62f10402cc9e11b9366630587ed585" title="Insert, update or delete policies in cynara database. ">cynara_admin_set_policies()</a>.</dd></dl>
<dl class="section user"><dt>Method of function operation:</dt><dd>Policies are based on policy result number. Policies can be built in (like primitives: ALLOW, DENY...) or can be loaded from cynara plugin extensions. This API gives possibility of checking, which of these result exist in current cynara server and can be presented to user in a readable way (of course additional translation may be needed).</dd></dl>
<p>Descriptions of existing policy results are returned as NULL terminated array of pointers of <a class="el" href="structcynara__admin__policy__descr.html" title="Describes policy of type given with result. ">cynara_admin_policy_descr</a> structures.</p>
<p>Example output could be {{0, "Deny"}, {11, "AskUser"}, {65535, "Allow"}, NULL}</p>
<p>In case of successful call CYNARA_API_SUCCESS is returned and <em>descriptions points to newly created array of pointers to struct <a class="el" href="structcynara__admin__policy__descr.html" title="Describes policy of type given with result. ">cynara_admin_policy_descr</a>. It is responsibility of caller to release:</p>
<ul>
<li>all non-NULL char pointers in all <a class="el" href="structcynara__admin__policy__descr.html" title="Describes policy of type given with result. ">cynara_admin_policy_descr</a> structures;</li>
<li>all pointers to <a class="el" href="structcynara__admin__policy__descr.html" title="Describes policy of type given with result. ">cynara_admin_policy_descr</a> structures kept in *descriptions array;</li>
<li>*descriptions array itself. All allocation made by cynara admin library are done with malloc(3) function and must be released with free(3) function.</li>
</ul>
<p></em></p>
<p><em></p>
<dl class="section user"><dt>Sync (or) Async:</dt><dd>This is a synchronous API.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_cynara_admin</td><td>cynara admin structure. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">descriptions</td><td>placeholder for NULL terminated array of pointers of description structures.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CYNARA_API_SUCCESS on success, or error code otherwise. </dd></dl>
<p></em></p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li><li class="navelem"><a class="el" href="cynara-admin_8h.html">cynara-admin.h</a></li>
    <li class="footer">Generated on Mon Nov 9 2015 15:24:42 for Cynara API by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
